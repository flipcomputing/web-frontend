<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Libre+Franklin:ital,wght@0,400;0,700;1,400;1,700&display=swap');
  </style>
  <link rel="stylesheet" href="../../css/theme_002.css">
  <link rel="stylesheet" href="../../css/style.css">
  <title>Slides</title>
</head>
<body>
  <article class="container">
        <nav>
      
      
      <h3 class="section__title">
        <a class="slide__title" href="../slide_001">
        How do we query a relational database?
        </a>
      </h3>
      
      <a class="slide__previous" href="../slide_022/"><</a>
      <link rel="stylesheet" href="../../css/theme_002.css">
      <a class="slide__next" href="../slide_024/">></a>

      <h2 class="slide__title">
        <a class="slide__title" href="../slide_001">
        INNER JOIN...
        </a>
      </h2>

      <p class="logo">
        <a class="slide__title" href="../slide_001">
          <span>(“</span>Manchester<span>”)+<br></span><span>(“</span>Digital<span>”)></span>
        </a>
      </p>
    </nav>
    <main class=grid-2>
      <section class="slide__text">
<h5>Join 2 tables on matching columns</h5>
<ul>
<li>Until now we've been querying a single table at a time</li>
<li>One of the main strengths of a relational database is the ability to join tables together</li>
<li>This enables us to piece data together from different places to answer a question</li>
</ul>
<p>Think of a join as a left and right table:</p>
<ul>
<li><strong>Left</strong> - The first table in the join (on the <code>FROM</code> line)</li>
<li><strong>Right</strong> - The second table in the join (on the <code>INNER JOIN</code> line)</li>
</ul>
<pre><code>SELECT      l.&lt;field1&gt;, l.&lt;field2&gt;, l.&lt;field3&gt;, r.&lt;field1&gt;, r.&lt;field2&gt;, r.&lt;field3&gt;
FROM        &lt;schema_name&gt;.&lt;table_name&gt; | &lt;view_name&gt; AS l
INNER JOIN  &lt;schema_name&gt;.&lt;table_name&gt; | &lt;view_name&gt; AS r
            ON l.&lt;field1&gt; = r.&lt;field1&gt; AND l.&lt;field2&gt; = r.&lt;field2&gt;;
</code></pre>
<h6>Terms</h6>
<ul>
<li><code>INNER JOIN</code> = Combines rows that have <strong>matching values</strong> in two or more tables</li>
<li><code>ON</code> = The columns on which you want to join the tables
<ul>
<li>They must have compatable data and data types to get a meaningful result</li>
</ul>
</li>
</ul>
<hr />
<h5>Entity Relationship Diagram (ERD) Revisited</h5>
<p>So how do we know what columns are joinable to which other table?</p>
<p>Let's look at the ERD:</p>
<caption>1. Sequel-Mart's database schema</caption>
<img src="../../images/002_Sequel_Mart_Schema.png" />
<ul>
<li>As an example, we can join <code>Sales_Header</code> to <code>Customers</code>.
<ul>
<li>This can be done by joining a column on each table called <code>customer_id</code></li>
<li>Good naming conventions on tables often makes this job a lot easier</li>
</ul>
</li>
</ul>
<pre><code>SELECT *
FROM &quot;sequel-mart-schema&quot;.&quot;Sales_Header&quot; AS sh 
INNER JOIN &quot;sequel-mart-schema&quot;.&quot;Customers&quot; AS cu
    ON sh.customer_id = cu.customer_id;
</code></pre>
<ul>
<li>This returns transactions from the <code>Sales_Header</code> and more detailed information about each customer from <code>Customers</code></li>
<li>Other possible joins include:
<ul>
<li><code>Sales_Header</code> to <code>Stores</code></li>
<li><code>Sales_Header</code> to <code>Dates</code></li>
<li><code>Sales_Header</code> to <code>Sales_Detail</code></li>
<li><code>Sales_Detail</code> to <code>Products</code></li>
</ul>
</li>
</ul>
<h5>Notes:</h5>
<ul>
<li><code>INNER JOIN</code> is the longer form of this type of join.</li>
<li>We can just use <code>JOIN</code> and the queries would run in the same way</li>
<li>Beware that <code>INNER JOIN</code> only returns where records exist in <strong>both</strong> tables
<ul>
<li>If something is in one table and not the other it will not be returned</li>
</ul>
</li>
</ul>
</section>
<section class="slide__images">
<caption>1. INNER JOIN returns matches found in BOTH tables only</caption>
<img src="../../images/002_INNER_JOIN_Venn.png" />
<caption>2. Joining Customers to Sales Header</caption>
<img src="../../images/002_INNER_JOIN_cu_sh.png" />
</section>
<section class="slide__exercises">
<hr>
<h4>Exercises:</h4>
<ol>
<li>Join Sales_Header (alias sh) to Stores (alias st).  Bring back the first 20 rows.</li>
<li>Join Sales_Header (alias sh) to Dates (alias dt).  Bring back the first 20 rows.</li>
<li>Join Sales_Header (alias sh) to Sales_Detail (alias sd).  Bring back the first 20 rows.</li>
<li>Join Sales_Detail (alias sd) to Products (alias pr).  Bring back the first 20 rows.</li>
</ol>
</section>
    </main>
        
    <footer>
      

      <h3>
        <a class="slide__title" href="../slide_001">
        Database Bootcamp 6
        </a>
      </h3>

      <h5 class="slide__copy">
        <span>© Thomas Steeples 2022</span>
      </h5>


      <p class="slide-number">Slide 23</p>
    </footer>
  </article>
  <script src="../../js/app.js"></script>
</body>
</html>